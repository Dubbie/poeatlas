!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){__webpack_require__(1),__webpack_require__(6),__webpack_require__(3),__webpack_require__(2),__webpack_require__(4),__webpack_require__(5)},function(module,exports){var events={events:{},on:function(eventName,fn){this.events[eventName]=this.events[eventName]||[],this.events[eventName].push(fn)},off:function(eventName,fn){if(this.events[eventName])for(var i=0;i<this.events[eventName].length;i++)if(this.events[eventName][i]===fn){this.events[eventName].splice(i,1);break}},emit:function(eventName,data){this.events[eventName]&&this.events[eventName].forEach(function(fn){fn(data)})}};module.exports=events},function(module,exports,__webpack_require__){var events=__webpack_require__(1);(function(){function setTotal(maps){total=maps.length,count=maps.filter(function(m){return m.completed}).length,atlasTotal.innerText=total,atlasCounter.innerText=count,atlasBar.style.width=count/total*100+"%"}function init(){events.on("mapsChanged",setTotal)}var total=0,atlasContainer=document.getElementById("atlas-container"),atlasCounter=atlasContainer.querySelector("#atlas-counter"),atlasTotal=atlasContainer.querySelector("#atlas-total"),atlasBar=atlasContainer.querySelector("#atlas-bar");init()})()},function(module,exports,__webpack_require__){var events=__webpack_require__(1);(function(){function isComplete(map){for(var c=!1,i=0;i<completed.length;i++)if(completed[i].name==map.name){c=!0;break}return c}function toggleTier(t){var value=(mapsContainer.querySelector("#map-tier-"+t+" .map-tier-complete"),!0),mapsInTier=maps.filter(function(map){return map.tier==t}),mapsInTierCompleted=mapsInTier.filter(function(map){return 1==map.completed});mapsInTierCompleted.length==mapsInTier.length&&(value=!1),mapsInTier.forEach(function(map){map.complete(value)}),events.emit("completedChanged",mapsInTier),checkTierLabels()}function checkTierLabels(){var els=[].slice.call(mapsContainer.querySelectorAll(".map-tier"));els.forEach(function(el){var t=parseInt(el.id.replace("map-tier-","")),counter=el.querySelector(".map-tier-counter"),mapsInTier=maps.filter(function(map){return map.tier==t}),mapsInTierCompleted=mapsInTier.filter(function(map){return 1==map.completed});mapsInTier.length==mapsInTierCompleted.length?(counter.classList.add("hidden"),el.querySelector(".map-tier-complete").src="img/toggle_on.png"):(counter.classList.remove("hidden"),el.querySelector(".map-tier-complete").src="img/toggle_off.png"),counter.innerText=mapsInTierCompleted.length+" / "+mapsInTier.length})}function getMaps(query){var http=new XMLHttpRequest;http.open("POST","maps/fetch.php",!0),http.setRequestHeader("Content-type","application/x-www-form-urlencoded"),http.onreadystatechange=function(){if(4==http.readyState&&200==http.status){var ms=JSON.parse(http.responseText),l=body.querySelector("#loader");l.parentNode.removeChild(l),ms.forEach(function(m){var newMap=new Map(m);newMap.render(),maps.push(newMap)}),maps.forEach(function(map){map.complete(isComplete(map))}),events.emit("completedChanged",maps),checkTierLabels()}},http.send("search="+query)}function setExpandoHeights(){var expandos=[].slice.call(mapsContainer.querySelectorAll(".map-expando"));expandos.forEach(function(expando){var h=0,children=[].slice.call(expando.children);children.forEach(function(child){h+=child.getBoundingClientRect().height}),expando.style.maxHeight=h+"px"}),maps[0].element.parentNode.classList.remove("collapsed")}function updateCompleted(alteredMaps){alteredMaps.forEach(function(map){for(var i=0,l=!1;i<completed.length&&!l;)l=completed[i].name==map.name,i++;!l&&map.completed?completed.push(map):l&&!map.completed&&completed.splice(i-1,1)}),checkTierLabels(),localStorage.completed=JSON.stringify(completed),events.emit("mapsChanged",maps)}function resetCompleted(mapsToReset){mapsToReset.forEach(function(map){map.complete(!1)}),events.emit("completedChanged",mapsToReset)}function completeAll(){maps.forEach(function(map){map.complete(!0)}),events.emit("completedChanged",maps)}function toggleExpandos(mode){var exps=mapsContainer.querySelectorAll(".map-expando");exps.forEach(function(el){1==mode?el.classList.remove("collapsed"):el.classList.add("collapsed")})}function toggleIncompletedTiers(mode){if(maps.length>0){var els=[].slice.call(mapsContainer.querySelectorAll(".map-tier"));els.forEach(function(el){var t=parseInt(el.id.replace("map-tier-","")),counter=el.querySelector(".map-tier-counter"),nums=counter.innerText.split(" / "),count=nums[1]-nums[0],mapsInTier=maps.filter(function(m){return m.tier==t});1==mode&&0==count?el.classList.add("hidden"):1==mode&&count>0?el.classList.remove("hidden"):(el.classList.remove("hidden"),mapsInTier.forEach(function(map){map.completed?map.element.classList.add("hidden"):map.element.classList.remove("hidden")})),mapsInTier.forEach(function(map){map.completed&&1==mode?map.element.classList.add("hidden"):map.element.classList.remove("hidden")})})}}function init(){events.on("completedChanged",updateCompleted),events.on("resetCompleted",resetCompleted),events.on("completeAll",completeAll),events.on("toggleExpandos",toggleExpandos),events.on("toggleIncompletedTiers",toggleIncompletedTiers),getMaps(""),window.onload=function(){setExpandoHeights()}}var Map=function(map){var _this=this;this.name=map.name,this.tier=map.tier,this.bonus=map.bonus,this.completed=!1,this.unique=map.unique,this.complete=function(c){c?this.element.classList.add("completed"):this.element.classList.remove("completed"),this.completed=c},this.render=function(){this.element=document.createElement("span"),this.element.classList.add("map-name");var link=document.createElement("a");if(link.target="_blank",link.href="http://pathofexile.gamepedia.com/index.php?search="+map.name,link.innerText=map.name,_this.unique&&link.classList.add("unique"),this.element.appendChild(link),this.element.setAttribute("map-name",this.name),this.element.onclick=function(e){e.target!=link&&(_this.complete(!_this.completed),events.emit("completedChanged",[_this]))},this.mapTierContainer=mapsContainer.querySelector("#map-tier-"+this.tier)||document.createElement("div"),!this.mapTierContainer.classList.contains("map-tier")){var heading=document.createElement("h2");heading.classList.add("map-tier-heading"),heading.innerText="Tier "+this.tier,map.tier>10?heading.classList.add("red"):map.tier>5?heading.classList.add("yellow"):heading.classList.add("white");var counter=document.createElement("span");counter.classList.add("map-tier-counter");var completeButton=document.createElement("img");completeButton.classList.add("map-tier-complete"),completeButton.src="img/toggle_off.png",completeButton.onclick=function(){toggleTier(map.tier)};var expando=document.createElement("div");expando.classList.add("map-expando","collapsed","animated"),heading.onclick=function(){expando.classList.toggle("collapsed")},this.mapTierContainer.id="map-tier-"+this.tier,this.mapTierContainer.classList.add("map-tier"),this.mapTierContainer.appendChild(heading),this.mapTierContainer.appendChild(counter),this.mapTierContainer.appendChild(completeButton),this.mapTierContainer.appendChild(expando),mapsContainer.appendChild(this.mapTierContainer)}this.mapTierContainer.querySelector(".map-expando").appendChild(this.element)}},maps=[],completed="undefined"!=typeof localStorage.completed?JSON.parse(localStorage.completed):[],body=document.body,mapsContainer=body.querySelector("#maps-container");init()})()},function(module,exports,__webpack_require__){var events=__webpack_require__(1);(function(){function init(){events.on("mapsChanged",setMaps),bindUIActions()}function setMaps(newMaps){maps=newMaps}function bindUIActions(){searchInput.onkeyup=function(){searchMaps(this.value)},searchInput.onclick=function(){searchMaps(this.value)},body.onclick=function(e){var p=e.target.parentElement;p.className.indexOf("dd")==-1&&toggleDropdown("hide")}}function searchMaps(query){if(query.length>2){resetDropdown();var found=maps.filter(function(m){return m.name.toLowerCase().indexOf(query.toLowerCase())>-1});found.length>0?(found.forEach(function(m){var i=m.name.toLowerCase().indexOf(query.toLowerCase()),bq=m.name.substr(0,i),q=m.name.substr(i,query.length),aq=m.name.substr(i+query.length,m.name.length),newText=bq+"<b>"+q+"</b>"+aq,map=document.createElement("span");map.innerHTML=newText,map.classList.add("map-name"),m.unique&&map.classList.add("unique"),map.onclick=function(){searchInput.value="",toggleDropdown("hide"),m.element.parentElement.classList.remove("collapsed"),scrollTo(document.body,m.element.getBoundingClientRect().top,500)},dropDown.appendChild(map)}),toggleDropdown("show")):toggleDropdown("hide")}else resetDropdown()}function toggleDropdown(mode){"show"==mode?(dropDown.classList.remove("hidden"),searchInput.classList.remove("rounded")):"hide"===mode&&(dropDown.classList.add("hidden"),searchInput.classList.add("rounded"))}function resetDropdown(){for(toggleDropdown("hide");dropDown.lastChild;)dropDown.removeChild(dropDown.lastChild)}var maps=[],body=document.body,searchForm=body.querySelector("#search-form"),searchInput=searchForm.querySelector("#search-input"),dropDown=searchForm.querySelector(".dd");init()})()},function(module,exports,__webpack_require__){var events=__webpack_require__(1);(function(){function bindUIActions(){resetButton.onclick=function(){confirm("Are you sure you want to reset all of your completed maps?")&&events.emit("resetCompleted",completed)},completeButton.onclick=function(){confirm("Are you sure you want to set all the maps to completed?")&&events.emit("completeAll")},expandButton.onclick=function(){expandButton.classList.toggle("active");var fa=expandButton.children[0];expandButton.classList.contains("active")?expandButton.setAttribute("data-tooltip-text","Collapse tiers"):expandButton.setAttribute("data-tooltip-text","Expand tiers"),fa.classList.toggle("fa-compress"),fa.classList.toggle("fa-expand"),events.emit("toggleExpandos",expandButton.classList.contains("active"))},toggleButton.onclick=function(){toggleButton.classList.toggle("active"),toggleIncomplete()},window.onscroll=function(){var btn=body.querySelector("#top-button");window.pageYOffset>0?btn.classList.remove("hidden"):btn.classList.add("hidden")},topButton.onclick=function(){scrollTo(document.body,0,500)}}function toggleIncomplete(){var mode=toggleButton.classList.contains("active");mode?toggleButton.setAttribute("data-tooltip-text","Show all"):toggleButton.setAttribute("data-tooltip-text","Show incomplete only"),events.emit("toggleIncompletedTiers",mode)}function setCompleted(maps){completed=maps.filter(function(m){return m.completed})}function init(){bindUIActions(),events.on("mapsChanged",setCompleted),events.on("completedChanged",toggleIncomplete)}var completed=[],body=document.body,toolbar=body.querySelector("#toolbar"),resetButton=toolbar.querySelector("#reset"),completeButton=toolbar.querySelector("#complete"),expandButton=toolbar.querySelector("#expand"),toggleButton=toolbar.querySelector("#toggle-incomplete"),topButton=body.querySelector("#top-button");init()})()},function(module,exports){}]);